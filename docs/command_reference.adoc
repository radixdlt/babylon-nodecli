:sectnums:
=== Core node setup using docker
Below are the list of commands that can be used with cli to setup a core node or gateway.

==== radixnode docker dependencies
[source, bash,subs="+quotes, +attributes" ]
----
usage: radixnode docker dependencies [-h]

This commands installs all necessary software on the Virtual Machine(VM). Run
this command on fresh VM or on a existing VM as the command is tested to be
idempotent

optional arguments:
  -h, --help  show this help message and exit
----

==== radixnode docker config
[source, bash,subs="+quotes, +attributes" ]
----
usage: radixnode docker config [-h] [-a] [-d CONFIGDIR] [-k KEYSTOREPASSWORD]
                               -m {CORE,GATEWAY,DETAILED}
                               [{CORE,GATEWAY,DETAILED} ...] [-n NETWORKID]
                               [-nk] [-t TRUSTEDNODE] [-v VALIDATOR]
                               [-xc {true,false}]

This commands allows node-runners and gateway admins to create a config file,
which can persist their custom settings. Thus it allows is to decouple the
updates from configuration. Config is created only once as such and if there
is a version change in the config file, then it updated by doing a migration
to newer version

optional arguments:
  -h, --help            show this help message and exit

required arguments:
  -m {CORE,GATEWAY,DETAILED} [{CORE,GATEWAY,DETAILED} ...], --setupmode {CORE,GATEWAY,DETAILED} [{CORE,GATEWAY,DETAILED} ...]
                        Quick config mode with assumed defaults. It supports
                        two quick modes and a detailed config mode. CORE: Use
                        this value to setup CORE using defaults. GATEWAY: Use
                        this value to setup GATEWAY using defaults. DETAILED:
                        Default value if not provided. This mode takes your
                        through series of questions.

optional arguments:
  -a, --autoapprove     Set this to true to run without any prompts and in
                        mode CORE or GATEWAY.Prompts still appear if you run
                        in DETAILED mode Use this for automation purpose only
  -d CONFIGDIR, --configdir CONFIGDIR
                        Path to node-config directory where config file will
                        stored. Default value is /Users/albertpereztoro/node-
                        config
  -k KEYSTOREPASSWORD, --keystorepassword KEYSTOREPASSWORD
                        Core Node requires a keystore. This is the password
                        for the keystore file the CLI will create new key with
                        name `node-keystore.ks` in config directory. If the
                        keystore exists in config directory, CLI finds it ,
                        and uses the password from -k parameter or prompt for
                        the password to be entered. CLI never modifies the
                        password of keystore
  -n NETWORKID, --networkid NETWORKID
                        Network id of network you want to connect.For stokenet
                        it is 2 and for mainnet it is 1.If not provided you
                        will be prompted to enter a value
  -nk, --newkeystore    Set this to true to create a new store without any
                        prompts using location defined in argument configdir
  -t TRUSTEDNODE, --trustednode TRUSTEDNODE
                        Trusted node on radix network.Example format: 'radix:/
                        /node_tdx_b_1qdrcdjgzl6s2ymnsssdssxllmmj0j84eagu2m6xtt
                        tj3nxrunzesyh9fwea@3.109.242.93'.This is required only
                        if you are creating config to run a CORE node and if
                        not provided you will be prompted to enter a value
  -v VALIDATOR, --validator VALIDATOR
                        Address of the validator
  -xc {true,false}, --disablenginxforcore {true,false}
                        Core Node API's are protected by Basic auth
                        setting.Set this to disable to nginx for core
----

==== radixnode docker install
[source, bash,subs="+quotes, +attributes" ]
----
usage: radixnode docker install [-h] [-f CONFIGFILE] [-a] [-u]

This commands setups up the software and deploys it based on what is stored in
the config.yaml file. To update software versions, most of the time it is
required to update the versions in config file and run this command

optional arguments:
  -h, --help            show this help message and exit

optional arguments:
  -f CONFIGFILE, --configfile CONFIGFILE
                        Path to config file. This file is generated by running
                        'radixnode docker config'The default value is
                        `/Users/albertpereztoro/node-config/config.yaml` if
                        not provided
  -a, --autoapprove     Pass this option to run without any prompts. Use this
                        for automation purpose only
  -u, --update          Pass this option to update the deployed softwares to
                        latest version. CLI prompts to confirm the versions if
                        '-a' is not passed
----

==== radixnode docker start
[source, bash,subs="+quotes, +attributes" ]
----
usage: radixnode docker start [-h] [-f CONFIGFILE]

This commands starts the docker containers based on what is stored in the
config.yaml file. If you have modified the config file, it is advised to use
setup command.

optional arguments:
  -h, --help            show this help message and exit

optional arguments:
  -f CONFIGFILE, --configfile CONFIGFILE
                        Path to config file. This file is generated by running
                        'radixnode docker config'The default value is
                        `/Users/albertpereztoro/node-config/config.yaml` if
                        not provided
----

==== radixnode docker stop
[source, bash,subs="+quotes, +attributes" ]
----
usage: radixnode docker stop [-h] [-f CONFIGFILE] [-v]

This commands stops the docker containers

optional arguments:
  -h, --help            show this help message and exit

optional arguments:
  -f CONFIGFILE, --configfile CONFIGFILE
                        Path to config file. This file is generated by running
                        'radixnode docker config'The default value is
                        `/Users/albertpereztoro/node-config/config.yaml` if
                        not provided
  -v, --removevolumes   Remove the volumes
----
=== Ledger sync using an external S3 bucket
Below are the list of commands that can be used with cli to sync the ledger with a S3 bucket.

==== radixnode ledger sync
[source, bash,subs="+quotes, +attributes" ]
----
usage: radixnode ledger sync [-h] -d DEST -bn BUCKETNAME [-bf BUCKETFOLDER]

This commands allows to download the content of an external S3 bucket to the
ledger folder. The ledger folder and the name and folder of an external S3
bucket should be indicated

optional arguments:
  -h, --help            show this help message and exit

required arguments:
  -d DEST, --dest DEST  Destination path where the backup of the ledger will
                        be downloaded
  -bn BUCKETNAME, --bucketname BUCKETNAME
                        S3 bucket name to download the backup of the ledger
                        from

optional arguments:
  -bf BUCKETFOLDER, --bucketfolder BUCKETFOLDER
                        S3 bucket folder to download the backup of the ledger
                        from
----
=== Core node setup using systemd
Below are the list of commands supported in cli to setup a core node process as a systemd process

==== radixnode systemd dependencies
[source, bash,subs="+quotes, +attributes" ]
----
usage: radixnode systemd dependencies [-h]

This commands installs all necessary software on the Virtual Machine(VM). Run
this command on fresh VM or on an existing VM as the command is tested to be
idempotent

optional arguments:
  -h, --help  show this help message and exit
----

==== radixnode systemd install
[source, bash,subs="+quotes, +attributes" ]
----
usage: radixnode systemd install [-h] [-a] [-u] [-f CONFIGFILE] [-m]

This sets up the systemd service for the core node.

optional arguments:
  -h, --help            show this help message and exit

optional arguments:
  -a, --auto            Automatically approve all Yes/No prompts
  -u, --update          Update the node to new version of node
  -f CONFIGFILE, --configfile CONFIGFILE
                        Path to config file. This file is generated by running
                        'radixnode systemd config'The default value is
                        `/Users/albertpereztoro/node-config/config.yaml` if
                        not provided
  -m, --manual          Only generate systemd file but not put it into systemd
                        folder.This is mainly used for automation in
                        unprivileged environments.
----

==== radixnode systemd restart
[source, bash,subs="+quotes, +attributes" ]
----
usage: radixnode systemd restart [-h] [-s {all,nginx,radixdlt-node}]

This restarts the CORE node systemd service.

optional arguments:
  -h, --help            show this help message and exit

optional arguments:
  -s {all,nginx,radixdlt-node}, --services {all,nginx,radixdlt-node}
                        Name of the service either to be started. Valid values
                        nginx or radixdlt-node
----

==== radixnode systemd stop
[source, bash,subs="+quotes, +attributes" ]
----
usage: radixnode systemd stop [-h] [-s {all,nginx,radixdlt-node}]

This stops the CORE node systemd service.

optional arguments:
  -h, --help            show this help message and exit

optional arguments:
  -s {all,nginx,radixdlt-node}, --services {all,nginx,radixdlt-node}
                        Name of the service either to be stopped. Valid values
                        nginx or radixdlt-node
----
=== Set passwords for the Nginx server
This will set up the admin user and password for access to the general system endpoints.

==== radixnode auth set-admin-password
[source, bash,subs="+quotes, +attributes" ]
----
usage: radixnode auth set-admin-password [-h] -m {DOCKER,SYSTEMD}
                                         [-u USERNAME] [-p PASSWORD]

This sets up admin password on nginx basic auth. Refer this link for all the
paths. https://docs.radixdlt.com/main/node-and-gateway/port-
reference.html#_endpoint_usage

optional arguments:
  -h, --help            show this help message and exit

required arguments:
  -m {DOCKER,SYSTEMD}, --setupmode {DOCKER,SYSTEMD}
                        Setup type whether it is DOCKER or SYSTEMD

optional arguments:
  -u USERNAME, --username USERNAME
                        Name of admin user. Default value is `admin`
  -p PASSWORD, --password PASSWORD
                        Password of admin user
----

==== radixnode auth set-superadmin-password
[source, bash,subs="+quotes, +attributes" ]
----
usage: radixnode auth set-superadmin-password [-h] -m {DOCKER,SYSTEMD}
                                              [-u USERNAME] [-p PASSWORD]

This sets up superadmin password on nginx basic auth. Refer this link for all
the paths. https://docs.radixdlt.com/main/node-and-gateway/port-
reference.html#_endpoint_usage

optional arguments:
  -h, --help            show this help message and exit

required arguments:
  -m {DOCKER,SYSTEMD}, --setupmode {DOCKER,SYSTEMD}
                        Setup type whether it is DOCKER or SYSTEMD

optional arguments:
  -u USERNAME, --username USERNAME
                        Name of superadmin user. Default value is `superadmin`
  -p PASSWORD, --password PASSWORD
                        Password of superadmin user
----

==== radixnode auth set-metrics-password
[source, bash,subs="+quotes, +attributes" ]
----
usage: radixnode auth set-metrics-password [-h] -m {DOCKER,SYSTEMD}
                                           [-u USERNAME] [-p PASSWORD]

This sets up metrics password on nginx basic auth. Refer this link for all the
paths. https://docs.radixdlt.com/main/node-and-gateway/port-
reference.html#_endpoint_usage

optional arguments:
  -h, --help            show this help message and exit

required arguments:
  -m {DOCKER,SYSTEMD}, --setupmode {DOCKER,SYSTEMD}
                        Setup type whether it is DOCKER or SYSTEMD

optional arguments:
  -u USERNAME, --username USERNAME
                        Name of metrics user. Default value is `metrics`
  -p PASSWORD, --password PASSWORD
                        Password of metrics user
----

==== radixnode auth set-gateway-password
[source, bash,subs="+quotes, +attributes" ]
----
usage: radixnode auth set-gateway-password [-h] -m {DOCKER,SYSTEMD}
                                           [-u USERNAME] [-p PASSWORD]

This sets up gateway password on nginx basic auth. Refer this link for all the
paths. https://docs.radixdlt.com/main/node-and-gateway/port-
reference.html#_endpoint_usage

optional arguments:
  -h, --help            show this help message and exit

required arguments:
  -m {DOCKER,SYSTEMD}, --setupmode {DOCKER,SYSTEMD}
                        Setup type whether it is DOCKER or SYSTEMD

optional arguments:
  -u USERNAME, --username USERNAME
                        Name of gateway user. Default value is `gateway`
  -p PASSWORD, --password PASSWORD
                        Password of gateway user
----
=== Accessing core endpoints using CLI
Once the nginx basic auth passwords for admin, superadmin, metrics users are setup , radixnode cli can be used to access the node endpoints

==== radixnode system health
[source, bash,subs="+quotes, +attributes" ]
----
usage: radixnode api system health [-h]

This command displays the health of the node on whether it is syncing, or
booting or up

optional arguments:
  -h, --help  show this help message and exit
----

==== radixnode system version
[source, bash,subs="+quotes, +attributes" ]
----
usage: radixnode api system version [-h]

This command displays the version of node software that is currently running

optional arguments:
  -h, --help  show this help message and exit
----

==== radixnode system configuration
[source, bash,subs="+quotes, +attributes" ]
----
usage: radixnode api system configuration [-h]

This command displays the configuration of the node

optional arguments:
  -h, --help  show this help message and exit
----

==== radixnode system peers
[source, bash,subs="+quotes, +attributes" ]
----
usage: radixnode api system peers [-h]

This command displays peers that node sees on the network

optional arguments:
  -h, --help  show this help message and exit
----

==== radixnode system addressbook
[source, bash,subs="+quotes, +attributes" ]
----
usage: radixnode api system addressbook [-h]

This command displays address book on the data the node has stored

optional arguments:
  -h, --help  show this help message and exit
----

==== radixnode system network-sync-status
[source, bash,subs="+quotes, +attributes" ]
----
usage: radixnode api system network-sync-status [-h]

This command displays information on the status with respect to syncing to
network.

optional arguments:
  -h, --help  show this help message and exit
----

==== radixnode system identity
[source, bash,subs="+quotes, +attributes" ]
----
usage: radixnode api system identity [-h]

This command displays information on the status with respect to syncing to
network.

optional arguments:
  -h, --help  show this help message and exit
----
=== Setup monitoring using CLI
Using CLI , one can setup monitoring of the node or gateway.

==== radixnode monitoring config
[source, bash,subs="+quotes, +attributes" ]
----
usage: radixnode monitoring config [-h]
                                   [-m {MONITOR_CORE,MONITOR_GATEWAY,DETAILED} [{MONITOR_CORE,MONITOR_GATEWAY,DETAILED} ...]]
                                   [-cm COREMETRICSPASSWORD]
                                   [-gm GATEWAYAPIMETRICSPASSWORD]
                                   [-am AGGREGATORMETRICSPASSWORD]
                                   [-d MONITORINGCONFIGDIR]

This commands allows to create a config file, which can persist custom
settings for monitoring. Thus it allows is to decouple the updates from
configuration. Config is created only once as such and if there is a version
change in the config file, then it updated by doing a migration to newer
version

optional arguments:
  -h, --help            show this help message and exit

optional arguments:
  -m {MONITOR_CORE,MONITOR_GATEWAY,DETAILED} [{MONITOR_CORE,MONITOR_GATEWAY,DETAILED} ...], --setupmode {MONITOR_CORE,MONITOR_GATEWAY,DETAILED} [{MONITOR_CORE,MONITOR_GATEWAY,DETAILED} ...]
                        Quick setup with assumed defaults. It supports three
                        quick setup mode and a detailed setup mode.
                        MONITOR_CORE: Use this value to monitor Core using
                        defaults which assume core is run on same machine as
                        monitoring. MONITOR_GATEWAY: Use this value to monitor
                        GATEWAY using defaults which assume network gateway is
                        run on same machine. DETAILED: Default value if not
                        provided. This mode takes your through series of
                        questions.
  -cm COREMETRICSPASSWORD, --coremetricspassword COREMETRICSPASSWORD
                        Password for core metrics basic auth user
  -gm GATEWAYAPIMETRICSPASSWORD, --gatewayapimetricspassword GATEWAYAPIMETRICSPASSWORD
                        Password for gateway api metrics basic auth user
  -am AGGREGATORMETRICSPASSWORD, --aggregatormetricspassword AGGREGATORMETRICSPASSWORD
                        Password for aggregator metrics basic auth user
  -d MONITORINGCONFIGDIR, --monitoringconfigdir MONITORINGCONFIGDIR
                        Path to monitoring directory where config file will
                        stored
----

==== radixnode monitoring install
[source, bash,subs="+quotes, +attributes" ]
----
usage: radixnode monitoring install [-h] [-f MONITORINGCONFIGFILE] [-a]

This commands setups up the software and deploys it based on what is stored in
the config.yaml file. To update software versions, most of the time it is
required to update the versions in config file and run this command

optional arguments:
  -h, --help            show this help message and exit

optional arguments:
  -f MONITORINGCONFIGFILE, --monitoringconfigfile MONITORINGCONFIGFILE
                        Path to config file. Default is '/Users/albertpereztor
                        o/monitoring/monitoring_config.yaml'
  -a, --autoapprove     Set this to true to run without any prompts
----

==== radixnode monitoring start
[source, bash,subs="+quotes, +attributes" ]
----
usage: radixnode monitoring start [-h] [-f MONITORINGCONFIGFILE] [-a]

This commands starts the docker containers based on what is stored in the
config.yaml file. If you have modified the config file, it is advised to use
setup command.

optional arguments:
  -h, --help            show this help message and exit

optional arguments:
  -f MONITORINGCONFIGFILE, --monitoringconfigfile MONITORINGCONFIGFILE
                        Path to config file. Default is '/Users/albertpereztor
                        o/monitoring/monitoring_config.yaml'
  -a, --autoapprove     Set this to true to run without any prompts
----

==== radixnode monitoring stop
[source, bash,subs="+quotes, +attributes" ]
----
usage: radixnode monitoring stop [-h] [-f MONITORINGCONFIGFILE] [-v]

This commands stops the docker containers

optional arguments:
  -h, --help            show this help message and exit

optional arguments:
  -f MONITORINGCONFIGFILE, --monitoringconfigfile MONITORINGCONFIGFILE
                        Path to config file. Default is '/Users/albertpereztor
                        o/monitoring/monitoring_config.yaml'
  -v, --removevolumes   Remove the volumes
----

==== radixnode key info
[source, bash,subs="+quotes, +attributes" ]
----
usage: radixnode key info [-h] -p PASSWORD -f FILELOCATION

Using CLI, for a key file, you can print out the validator address. This
feature is in beta.

optional arguments:
  -h, --help            show this help message and exit

required arguments:
  -p PASSWORD, --password PASSWORD
                        Password of the keystore
  -f FILELOCATION, --filelocation FILELOCATION
                        Location of keystore on the disk
----
=== Other commands supported by CLI
List of other commands supported by cli are to check the version of CLI being used and optimise-node
to setup some of the OS tweaks on ubuntu

==== radixnode version 
[source, bash,subs="+quotes, +attributes" ]
----
usage: radixnode.py version [-h]

Run this command td display the version of CLI been used.

optional arguments:
  -h, --help  show this help message and exit
----

==== radixnode optimise-node 
[source, bash,subs="+quotes, +attributes" ]
----
usage: radixnode.py optimise-node [-h]

Run this command to setup ulimits and swap size on the fresh ubuntu machine .
Prompts asking to setup limits . Prompts asking to setup swap and size of swap
in GB

optional arguments:
  -h, --help  show this help message and exit
----
